## OAuth2.0

oauth2根据使用场景不同，分成了4种模式

- 授权码模式（authorization code）

  > 1、 **第三方应用**向**认证服务器**申请；
  >
  > 2、**认证服务器**向用户进行确认；
  >
  > 3、**用户**确认同意授权；
  >
  > 4、**认证服务器**发送**授权码**给**第三方应用**；
  >
  > 5、**第三方应用**根据**授权码**向认证服务器申请<u>**token**</u>；
  >
  > 6、**认证服务器**发送**<u>token</u>**给**第三方应用**；
  >
  > 7、**第三方应用**使用**<u>token</u>**进行操作；

- 简化模式（implicit）

- 密码模式（resource owner password credentials）

- 客户端模式（client credentials）

常使用密码模式（以下简称password模式）和客户端模式（以下简称client模式）。授权码模式使用到了回调地址，是最为复杂的方式，通常网站中经常出现的微博，qq第三方登录，都会采用这个形式。简化模式不常用。





## 问题

### 1、Oauth2为什么要先获取code，再请求token？

> Q: 在“第三方服务器”向“认证服务器”获取认证时，携带对应标识。之后，客户端同意授权后，“认证服务器”直接给“第三方服务器”返回token。

> 此操作，存在安全问题。假如“认证服务器”是伪造的，则无法辨识。所以，客户端同意授权后，“第三方服务器”需要主动向正确的“认证服务器”请求token。便采用先获取code，再主动请求token的方式。